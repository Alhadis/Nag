(function(){"use strict";var e=window,o=document,n=true,i=false,t=null,r=function(){},s,c="addEventListener",f="removeEventListener",a="querySelector",u=a+"All",l=Array.prototype.forEach,d=function(e,n,i){if(!e){var r=o.cookie.split(/;\s*/g),s={},c,f,a;for(f=0,a=r.length;f<a;++f)if(c=r[f].indexOf("="))s[r[f].substr(0,c)]=decodeURIComponent(r[f].substr(c+1));return s}if(undefined===n){r=o.cookie.split(/;\s*/g),c=e.length+1;for(var f=0,a=r.length;f<a;++f)if(e+"="===r[f].substr(0,c))return decodeURIComponent(r[f].substr(c));return t}else{i=i||{};if(t===n){n="";i.expires=-1}if(i.expires){var u=i.expires,u=(!u.toUTCString?new Date(Date.now()+864e5*u):u).toUTCString()}o.cookie=e+"="+encodeURIComponent(n)+(u?"; expires="+u:"")+(i.path?"; path="+i.path:"")+(i.domain?"; domain="+i.domain:"")+(i.secure?"; secure":"")}},h=function(o,a){var h=this,g=a.cookieName||(o.id?"shown-"+o.id:"")||"nag-dismissed",p={domain:a.cookieDomain,expires:a.cookieExpires||7,path:a.cookiePath||"/",secure:a.cookieSecure},m=a.eventName||"scroll",v=a.eventTarget||e,k=a.onHide||r,w=a.onShow||r,b=a.showAfter,b=s===b?4e3:Math.max(0,b),x=a.showClass||"show",S,T=function(){if(a.verbose)console.info("Triggered.");clearTimeout(S);v[f](m,T);h.show=n},C=i,U;Object.defineProperties(h,{silenced:{get:function(){return U}},show:{get:function(){return C},set:function(e){e=!!e;if(e!==C){C=e;o.classList[C?"add":"remove"](x);C?w(h):k(h)}}}});if(!+d(g)){if(m){setTimeout(function(){v[c](m,T)},100)}if(b)S=setTimeout(T,b);if(a.verbose){if(m&&S)console.info("Set to nag after "+b/1e3+' seconds, or on the "'+m+'" event, whichever happens first.');else if(m)console.info('Registering callback for "'+m+'" event.');else if(b)console.info("Showing nag after "+b/1e3+" seconds.");else console.error("No event or timer delay specified! Wrong arguments?")}}h.kick=function(){d(g,1,p);h.show=i;U=n;return h};h.reset=function(){d(g,t);return h};h.kickWhen=function(e){var n,i;for(n in e){i=e[n];l.call(o[u](n),function(e){e[c](i,function(){if(a.verbose)console.info("Kicking...");h.kick()})})}return h}};e.Nag=h})();
